pipeline{
    agent {label 'node2'}
    stages{
        stage('Checkout'){
            steps{
                git branch: 'main' ,url: 'https://github.com/jayanthis952/calculator-java.git'
            }
        }
        stage('build'){
            steps{
                sh ''' 
                    mvn clean install
                '''
            }
        }
        stage('deploy'){
            steps{
                sh '''
                   scp target/calculator-java-1.0-SNAPSHOT.jar ubuntu@44.203.46.61:/home/ubuntu
                   ssh ubuntu@44.203.46.61
                   nohup java -jar target/calculator-java-1.0-SNAPSHOT.jar
                 '''
            }
        }
    }
}
